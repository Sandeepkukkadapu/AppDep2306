{"ast":null,"code":"import _regeneratorRuntime from\"/home/brn-infotech/Desktop/appDep/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/brn-infotech/Desktop/appDep/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var emailInputRef=useRef();var PasswordInutRef=useRef();var navigate=useNavigate();useEffect(function(){axios.defaults.baseURL='';axios.defaults.headers.common['Authorization']=localStorage.getItem(\"token\");emailInputRef.current.value=localStorage.getItem(\"email\");PasswordInutRef.current.value=localStorage.getItem(\"password\");//  validateCredentials();\n// validateToken();\n},[]);var validateCredentials=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var dataToSend,reqOptions,JSONData,JSOData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dataToSend=new FormData();dataToSend.append(\"email\",emailInputRef.current.value);dataToSend.append(\"password\",PasswordInutRef.current.value);reqOptions={method:\"POST\",body:dataToSend};_context.next=6;return fetch(\"/validateLogin\",reqOptions);case 6:JSONData=_context.sent;_context.next=9;return JSONData.json();case 9:JSOData=_context.sent;if(JSOData.status===\"success\"){console.log(JSOData);// localStorage.setItem(\"email\",emailInputRef.current.value);\n// localStorage.setItem(\"password\",PasswordInutRef.current.value);\nlocalStorage.setItem(\"token\",JSOData.token);navigate(\"/home\",{state:JSOData});}else{alert(JSOData.msg);}case 11:case\"end\":return _context.stop();}},_callee);}));return function validateCredentials(){return _ref.apply(this,arguments);};}();var validateCredentialsThruAxios=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var dataToSend,responce;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dataToSend=new FormData();dataToSend.append(\"email\",emailInputRef.current.value);dataToSend.append(\"password\",PasswordInutRef.current.value);_context2.next=5;return axios.post(\"/validateLogin\",dataToSend);case 5:responce=_context2.sent;console.log(responce);if(responce.data.status===\"success\"){console.log(responce.data);// localStorage.setItem(\"email\",emailInputRef.current.value);\n// localStorage.setItem(\"password\",PasswordInutRef.current.value);\nlocalStorage.setItem(\"token\",responce.data.token);navigate(\"/home\",{state:responce.data});}else{alert(responce.data.msg);}case 8:case\"end\":return _context2.stop();}},_callee2);}));return function validateCredentialsThruAxios(){return _ref2.apply(this,arguments);};}();var validateToken=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var dataToSend,reqOptions,JSONData,JSOData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dataToSend=new FormData();dataToSend.append(\"token\",localStorage.getItem(\"token\"));reqOptions={method:\"POST\",body:dataToSend};_context3.next=5;return fetch(\"/validateToken\",reqOptions);case 5:JSONData=_context3.sent;_context3.next=8;return JSONData.json();case 8:JSOData=_context3.sent;console.log(JSOData);case 10:case\"end\":return _context3.stop();}},_callee3);}));return function validateToken(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"login\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:-\"}),/*#__PURE__*/_jsx(\"input\",{ref:emailInputRef})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:-\"}),/*#__PURE__*/_jsx(\"input\",{ref:PasswordInutRef})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){//  validateCredentials();\nvalidateCredentialsThruAxios();},children:\"login\"})})]}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Signup\"})]});}export default Login;","map":{"version":3,"names":["React","useEffect","useRef","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","emailInputRef","PasswordInutRef","navigate","defaults","baseURL","headers","common","localStorage","getItem","current","value","validateCredentials","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dataToSend","reqOptions","JSONData","JSOData","wrap","_callee$","_context","prev","next","FormData","append","method","body","fetch","sent","json","status","console","log","setItem","token","state","alert","msg","stop","apply","arguments","validateCredentialsThruAxios","_ref2","_callee2","responce","_callee2$","_context2","post","data","validateToken","_ref3","_callee3","_callee3$","_context3","className","children","ref","type","onClick","to"],"sources":["/home/brn-infotech/Desktop/appDep/client/src/componts/Login.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport { Link, useNavigate } from 'react-router-dom';\n\nimport axios from \"axios\";\n\nfunction Login() {\n\n   \n  \n    let emailInputRef=  useRef();\n    let PasswordInutRef = useRef();\n    let navigate = useNavigate();\n\n    useEffect(()=>{\n      axios.defaults.baseURL = '';\n      axios.defaults.headers.common['Authorization'] = localStorage.getItem(\"token\");\n      emailInputRef.current.value = localStorage.getItem(\"email\");\n   PasswordInutRef.current.value = localStorage.getItem(\"password\");\n  //  validateCredentials();\n    // validateToken();\n    },[])\n  \n\n    let validateCredentials = async()=>{\n\n    \n\n      let dataToSend = new FormData();\n    \n      dataToSend.append(\"email\",emailInputRef.current.value);\n      dataToSend.append(\"password\",PasswordInutRef.current.value);\n\n\n      let reqOptions = {\n        method:\"POST\",\n        body:dataToSend,\n      };\n\n      let JSONData = await fetch(\"/validateLogin\",reqOptions);\n\n      let JSOData =  await JSONData.json();\n\n      \n\n      if(JSOData.status === \"success\"){\n        console.log(JSOData);\n        // localStorage.setItem(\"email\",emailInputRef.current.value);\n        // localStorage.setItem(\"password\",PasswordInutRef.current.value);\n        localStorage.setItem(\"token\",JSOData.token);\n        navigate(\"/home\",{state:JSOData})\n      } else{\n        alert(JSOData.msg)\n      }\n\n     \n\n\n    };\n\n    let validateCredentialsThruAxios = async()=>{\n\n    \n\n      let dataToSend = new FormData();\n    \n      dataToSend.append(\"email\",emailInputRef.current.value);\n      dataToSend.append(\"password\",PasswordInutRef.current.value);\n\n     let responce = await axios.post(\"/validateLogin\",dataToSend)\n   \n     console.log(responce);\n      \n\n      if(responce.data.status === \"success\"){\n        console.log(responce.data);\n        // localStorage.setItem(\"email\",emailInputRef.current.value);\n        // localStorage.setItem(\"password\",PasswordInutRef.current.value);\n        localStorage.setItem(\"token\",responce.data.token);\n        navigate(\"/home\",{state:responce.data})\n      } else{\n        alert(responce.data.msg)\n      }\n\n     };\n\n    let validateToken =async()=>{\n      let dataToSend = new FormData();\n      dataToSend.append(\"token\",localStorage.getItem(\"token\"))\n\n      let reqOptions ={\n        method:\"POST\",\n        body:dataToSend\n      }\n\n      let JSONData = await fetch(\"/validateToken\",reqOptions);\n\n      let JSOData =await JSONData.json();\n\n      console.log(JSOData);\n\n    }\n\n  return (\n    <div className='App'>\n   <form>\n    <div><h1>login</h1></div>\n\n    <div>\n        <label>Email:-</label>\n        <input ref={emailInputRef}></input>\n    </div>\n    <div>\n        <label>Password:-</label>\n        <input ref={PasswordInutRef}></input>\n    </div>\n   \n  \n\n    <div>\n       <button type='button' onClick={()=>{\n    //  validateCredentials();\n    validateCredentialsThruAxios();\n       }}>login</button>\n    </div>\n\n   </form>\n   <Link to=\"/signup\">Signup</Link>\n    </div>\n  )\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}